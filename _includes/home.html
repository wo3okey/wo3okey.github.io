<!-- header -->
<header>
  <span id="me" href="javascript:void(0)" class="categories dropbtn" onclick="getCategories()">🧑‍💻</span>
  <div class="dropdown-content" id="myDropdown">
    {% for category in site.categories %}
      {% for post in category[1] limit:1%}
          <a href="/categories/{{post.categories}}">
            <img class="icon" src="{{site.url}}/assets/images/icons/{{post.categories}}.png" />
            {{ category | first }}
            <span class="badge">{{ category | last | size }}</span>
          </a>
      {% endfor %} 
    {% endfor %}
  </div>

  {% include search.html %}
  {% include menu.html menu=pages %}
</header>
<h1></h1>
{%- assign posts = paginator.posts -%}
{% for post in posts %}
  <article>
    {% include meta.html post=post preview=true %}
    <a href="{{ post.url | relative_url }}">
      <div class="post-title"><p>{{post.title}}</p></div>
      {{ post.excerpt }}
    </a>
  </article>
{% endfor %}

{% if paginator.total_pages > 1 %}
<footer class="pagination">
  {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path | relative_url }}">&laquo; 이전</a>
  {% else %}
  {% endif %}

  {% for page in (1..paginator.total_pages) %}
    {% if page == paginator.page %}
      <a style="color:darkorange;">{{ page }}</a>
    {% elsif page == 1 %}
      <a href="{{ '/' | relative_url }}">{{ page }}</a>
    {% else %}
      <a href="{{ site.paginate_path | relative_url | replace: ':num', page }}">{{ page }}</a>
    {% endif %}
  {% endfor %}

  {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path | relative_url }}">다음 &raquo;</a>
  {% else %}
  {% endif %}
</footer>
{% endif %}

<!-- paging -->
<!-- {% if paginator.total_pages > 1 %}
  <footer>
    {% if paginator.previous_page %}<a href="{{ paginator.previous_page_path | relative_url }}">« newer posts</a>{% else %}<span></span>{% endif %}
    <span>page {{ paginator.page }} of {{ paginator.total_pages }}</span>
    {% if paginator.next_page %}<a href="{{ paginator.next_page_path | relative_url }}">older posts »</a>{% else %}<span></span>{% endif %}
  </footer>
{% endif %} -->


<script>
let cnt = 0;
function getCategories() {
  document.getElementById("myDropdown").classList.toggle("show");
  cnt++

  if (cnt % 2 == 0) {
    document.getElementById("me").innerHTML = "🧑‍💻"
  } else {
    document.getElementById("me").innerHTML = "🙋‍♂️"
  }
}

window.onclick = function(e) {
  if (!e.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    for (var d = 0; d < dropdowns.length; d++) {
      var openDropdown = dropdowns[d];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
        document.getElementById("me").innerHTML = "🧑‍💻"
        cnt --;
      }
    }
  }
}
</script>