---
layout: post
title: 그래서 대용량 트래픽은 어떻게 처리할까? (feat. OSI 7계층)
categories: [cs]
tags: [cs, 대용량트래픽]
---

`대용량 트래픽 처리`는 서버 개발자들의 면접 단골 질문이자, 서버 개발자들이라면 한번쯤 고민해보는 그 주제이다. 사실 주어진 환경과 시스템에 따라 처리할 수 있는 방향과 방법이 무궁무진하다. 때로는 매우 쉬운 조치만으로도 가능해질 수 있다면, 때로는 시스템 아키텍처 전체를 뒤엎어야 하는 대공사를 해야할 수 있다. 일반적으로 고려하면 좋을 방법들을 알아보자.

## 대용량 트래픽 처리
`대용량 트래픽`은 말 그대로 단위 시간의 수 많은 요청을 뜻한다. 구글이나 페이스북과 같은 기업들은 초당 수십억 건 이상의 요청이 올 수 있으며, 일반 국내 기업에서도 초당 수천에서 수만 이상의 요청이 올 수 있다. 어느정도 트래픽이 대용량일지 정의한 수치는 따로 없다. 그냥 내 개인적인 생각이라면, 인프라 또는 데브옵스 조직이 있는 회사라면 어느정도 시스템 규모 및 트래픽이 있고, 이에 따른 전체적인 트래픽 관리를 하는게 아닐까 생각된다.

![HTTP protocol]({{site.url}}/assets/images/posts/high-traffic/high-traffic-01.png)

수백 수천의 트래픽도 결국 하나의 트래픽 처리를 수백 수천번 처리하는 것이다. 하나의 트래픽은 결국 `OSI 7계층`을 거쳐, 네트워크 통신에 의해 처리된다. 즉, 각 계층마다 대용량 트래픽을 처리하기 위해 각 목적지별로 데이터가 정상처리 될 수 있도록 최적화를 해놓으면 되는 것이다. 결국 각 계층별 병목 현상을 분석하고 최적의 방법을 찾는것이 곧 대용량 트래픽을 처리할 수 있는 방법이 아닐까 싶다.

## scale in/out
OSI 1계층은 물리 계층이며, 기계적인 장비와 관련된 계층이다. 사실상 트래픽을 처리할 수 있는 마지노선이며, 장비를 강화(sacle in)하거나 비슷한 장비를 여러개 장착(sacle out)하는 것을 선택해야 한다. 대용량 트래픽을 처리 하기 위해 물리적인 전송 매체를 최적화 하는 방법을 고려해야 한다. 사실 가장 좋은 방법은 성능이 빵빵한 장비를 사용하는 것이다. 하지만 늘 그렇듯 좋은 장비는 비싸다. 그래서 일반적으로 `sacle out`을 많이 선택한다.

### 대역폭
서버의 `대역폭(bandwidth)`이란? 서버에서 전송 가능한 데이터의 양을 의미한다. 즉, 초당 전송 가능한 데이터의 양을 측정한 값이다. 


## 그래서?

{% include ref.html %}
* <https://www.linkedin.com/pulse/3-tcp-udp-there-way-handshake-cyber-security-basics-ertan-kaya>